<auftragsverwaltung-ng-breadcrumb [buttons]="[{icon: 'add_box', route: '/job/hinzufuegen'}]"></auftragsverwaltung-ng-breadcrumb>

<mat-form-field class="w-100">
    <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter">
</mat-form-field>

<table class="w-100" mat-table matSort [dataSource]="jobs">
    <ng-container matColumnDef="id">
        <mat-header-cell mat-header-cell mat-sort-header *matHeaderCellDef>ID</mat-header-cell>
        <mat-cell mat-cell *matCellDef="let job">{{job.id}}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="dateIncoming">
        <mat-header-cell mat-sort-header *matHeaderCellDef>Eingangsdatum</mat-header-cell>
        <mat-cell *matCellDef="let job">{{job.dateIncoming | date:'shortDate'}}</mat-cell>
    </ng-container>

    <ng-container matColumnDef="expandedTasks">
        <td mat-cell *matCellDef="let job">
            Hier stehen die Tasks des jobs {{job.job.id}}
        </td>
    </ng-container>

    <mat-header-row *matHeaderRowDef="columnsToDisplay"></mat-header-row>

    <mat-row
        *matRowDef="let job; columns: columnsToDisplay;"
        class="job-row"
        matRipple
        [class.expanded]="expandedJob == job"
        (click)="expandedJob = job"
    ></mat-row>

    <mat-row *matRowDef="let job; columns: ['expandedTasks']; when: isTaskRow"
            [@taskExpand]="job.job == expandedJob ? 'expanded' : 'collapsed'"
            style="overflow: hidden"
            class="job-task-row"
    ></mat-row>
</table>
<mat-paginator [pageSizeOptions]="pageSizeOptions" [pageSize]="pageSize"></mat-paginator>